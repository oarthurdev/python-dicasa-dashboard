Tenho um projeto que j√° sincroniza dados da API da Kommo (amoCRM) com meu banco de dados. J√° sincronizo leads, events (que equivalem a "activities" no banco) e users (que s√£o "brokers" no banco).

Desejo que voc√™ modifique o projeto para incluir o c√°lculo e salvamento dos seguintes indicadores **por lead** no banco de dados:

1. **tempo_medio_resposta** (campo: `tempo_medio`)
2. **ticket_medio** (campo: `ticket_medio`)

## üïí Tempo M√©dio de Resposta (por lead)
- Para cada lead:
  - Use o campo `created_at` da lead como in√≠cio.
  - Busque as intera√ß√µes (notes) com o endpoint:
    - GET `/api/v4/leads/{lead_id}/notes`
  - Encontre a **primeira nota** criada por um usu√°rio do time (excluindo notas autom√°ticas, se poss√≠vel).
  - Calcule o tempo entre `created_at` da lead e o `created_at` da primeira nota do usu√°rio (em segundos ou minutos).
  - Salve esse valor no campo `tempo_medio` da lead no banco.

## üí∞ Ticket M√©dio (por lead)
- Pegue todos os leads com status "ganho" (status ID = 142):
  - GET `/api/v4/leads?filter[statuses][]=142`
- Para esses leads:
  - Extraia o campo `price`.
  - Calcule o ticket m√©dio:
    - ticket_medio = soma dos valores de `price` dos leads ganhos / quantidade desses leads
  - Salve esse valor no campo `ticket_medio` de **todos os leads (ou em uma tabela de m√©tricas agregadas, se for mais apropriado).**

## Requisitos T√©cnicos
- A fun√ß√£o de sincroniza√ß√£o deve ser atualizada para calcular e persistir esses dois valores no banco.
- Pode usar ORM ou queries diretas, de acordo com o que j√° est√° implementado.
- Garanta que o c√°lculo n√£o quebre se um lead n√£o tiver nota ou se o pre√ßo estiver nulo.
- Os campos novos (`tempo_medio`, `ticket_medio`) devem estar dispon√≠veis para leitura no banco.

## Outras observa√ß√µes
- Pode criar fun√ß√µes auxiliares para organizar os c√°lculos.
- O c√°lculo do `ticket_medio` pode ser atualizado a cada sincroniza√ß√£o completa, ou apenas uma vez ao dia.
- O c√°lculo de `tempo_medio` √© por lead, com base na **primeira intera√ß√£o** registrada (nota).

Atualize o c√≥digo de sincroniza√ß√£o para incluir isso. Me mostre a fun√ß√£o modificada.
